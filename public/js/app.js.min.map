{"version":3,"sources":["detectarDia.js","horarios.js","reservacita.js"],"names":["$","document","ready","fecha","val","dias","prop","change","numeroDia","Date","getDay","nombreDia","alert","hide","show","datepicker","$date","$hours","$doctor","loadHours","noHoursAlert","doctorId","url","getJSON","displayHours","data","morning","afternoon","html","htmlHours","iRadio","forEach","interval","getRadioIntervalHtml","text","start","end","nextTab","elem","next","find","click","prevTab","prev","valIni","psicoValue","especialidadValue","calculateAge","dob","today","birthDate","age","getFullYear","m","getMonth","getDate","toJSON","split","tooltip","on","e","target","parent","hasClass","active","removeClass","this","addClass"],"mappings":"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","file":"app.js","sourcesContent":["$(document).ready(function(){\r\n    var fecha = $('#fechacita').val();//string\r\n    const dias = [\r\n            'lunes',\r\n            'martes',\r\n            'miércoles',\r\n            'jueves',\r\n            'viernes',\r\n            'sábado',\r\n            'domingo',                   \r\n            ];\r\n\r\n    if(fecha==\"\"){\r\n        $('.horario').prop('disabled',true)\r\n    }\r\n\r\n    $('#fechacita').change(function(){        \r\n        fecha = $('#fechacita').val();\r\n        // console.log(fecha);\r\n        var numeroDia = new Date(fecha).getDay()\r\n        const nombreDia = dias[numeroDia];\r\n        // console.log(\"Nombre de día de la semana: \", nombreDia);\r\n        if(nombreDia == \"domingo\"){\r\n            $('.horario').prop('disabled',true)\r\n            alert(\"No hay citas los domingo\")\r\n        }\r\n        else if(nombreDia == \"sábado\"){\r\n            $('.horario').prop('disabled',false)\r\n            $('.l-v').hide()\r\n            $('.sábado').show()\r\n\r\n        }\r\n        else{\r\n            $('.horario').prop('disabled',false)\r\n            $('.sábado').hide()\r\n            $('.l-v').show()\r\n        }\r\n        \r\n    })  \r\n})\r\n","$(document).ready(function () {\r\n    $('.datepicker').datepicker();\r\n    $date = $('#date');\r\n    $hours = $('#hours');\r\n\t$doctor = $('#psicologa');\r\n    $date.change(loadHours);\r\n\t$doctor.change(loadHours);\r\n\tloadHours();\r\n\r\n\r\n});\r\nconst noHoursAlert = `<div class=\"alert alert-danger\" role=\"alert\">\r\n    <strong>Lo sentimos!</strong> No se encontraron horas disponibles para el médico en el día seleccionado.\r\n</div>`;\r\n\r\n\r\nfunction loadHours() {\r\n    fecha = $('#date').val();\r\n    var numeroDia = new Date(fecha).getDay();    \r\n\tconst doctorId = $doctor.val();\r\n    const url = `/dias?date=${fecha}&doctor_id=${doctorId}`;\r\n    $.getJSON(url, displayHours);\r\n}\r\n\r\nfunction displayHours(data) {\r\n\tif (!data.morning && !data.afternoon) {\r\n\t\t$hours.html(noHoursAlert);\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet htmlHours = '';\r\n\tiRadio = 0;\r\n\r\n\tif (data.morning) {\r\n\t\tconst morning_intervals = data.morning;\r\n\t\tmorning_intervals.forEach(interval => {\r\n\t\t\thtmlHours += getRadioIntervalHtml(interval);\r\n\t\t});\r\n\t}\r\n\tif (data.afternoon) {\r\n\t\tconst afternoon_intervals = data.afternoon;\r\n\t\tafternoon_intervals.forEach(interval => {\r\n\t\t\thtmlHours += getRadioIntervalHtml(interval);\r\n\t\t});\r\n\t}\r\n\t$hours.html(htmlHours);\r\n}\r\n\r\nfunction getRadioIntervalHtml(interval) {\r\n\tconst text = `${interval.start} - ${interval.end}`;\r\n\r\n\treturn `<div class=\"custom-control custom-radio mb-3\">\r\n  <input name=\"horacita\" value=\"${interval.start}\" class=\"custom-control-input\" id=\"interval${iRadio}\" type=\"radio\" required>\r\n  <label class=\"custom-control-label\" for=\"interval${iRadio++}\">${text}</label>\r\n</div>`;\r\n}","    // ------------step-wizard-------------\r\n    $(document).ready(function() {\r\n        $('#fechaNac').prop('max', function(){\r\n            return new Date().toJSON().split('T')[0];\r\n        });\r\n        $('#fechacita').prop('min', function(){\r\n            return new Date().toJSON().split('T')[0] ;\r\n        });\r\n        $('#fechacita').prop('max', function(){\r\n            return new Date().toJSON().split('T')[0]+1 ;\r\n        });\r\n        $('.nav-tabs > li a[title]').tooltip();\r\n\r\n        //Wizard\r\n        $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function(e) {\r\n\r\n            var target = $(e.target);\r\n\r\n            if (target.parent().hasClass('disabled')) {\r\n                return false;\r\n            }\r\n        });\r\n\r\n        $(\".next-step\").click(function(e) {\r\n\r\n            var active = $('.wizard .nav-tabs li.active');\r\n            active.next().removeClass('disabled');\r\n            nextTab(active);\r\n\r\n        });\r\n        $(\".prev-step\").click(function(e) {\r\n\r\n            var active = $('.wizard .nav-tabs li.active');\r\n            prevTab(active);\r\n\r\n        });\r\n\r\n        valIni();\r\n        $('.nav-tabs').on('click', 'li', function() {\r\n            $('.nav-tabs li.active').removeClass('active');\r\n            $(this).addClass('active');\r\n        });\r\n\r\n    });\r\n\r\n    function nextTab(elem) {\r\n        $(elem).next().find('a[data-toggle=\"tab\"]').click();\r\n    }\r\n\r\n    function prevTab(elem) {\r\n        $(elem).prev().find('a[data-toggle=\"tab\"]').click();\r\n    }\r\n   \r\n\r\n    function valIni(){\r\n        var psicoSelected = $('#psicologa option:selected');\r\n        var psicoValue = psicoSelected.data('user'); \r\n        $('#selectPsicologo').val(psicoValue);\r\n        $('#selectPsicologo').val(psicoValue);\r\n        var especialidadSelected = $('#especialidad option:selected');\r\n\t\tvar especialidadValue = especialidadSelected.val();\r\n        $('#terapia').val(especialidadValue);\r\n    }\r\n    $('#psicologa').change(function () { \r\n        var psicoSelected = $('#psicologa option:selected');\r\n        var psicoValue = psicoSelected.data('user'); \r\n        $('#selectPsicologo').val(psicoValue);\r\n    });\r\n    $('#especialidad').change(function () { \r\n        var especialidadSelected = $('#especialidad option:selected');\r\n\t\tvar especialidadValue = especialidadSelected.val();\r\n        $('#terapia').val(especialidadValue);\r\n    });\r\n    $('#fechaNac').change(function () { \r\n        var fechaNac = $('#fechaNac').val();\r\n        var age = calculateAge(fechaNac)\r\n        $('#edad').val(age);\r\n    });\r\n\r\n    //function calculate age from birt date\r\n    function calculateAge(dob) {\r\n        var today = new Date();\r\n        var birthDate = new Date(dob);\r\n        var age = today.getFullYear() - birthDate.getFullYear();\r\n        var m = today.getMonth() - birthDate.getMonth();\r\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n            age--;\r\n        }\r\n        return age;\r\n    }"]}